---
description: 
---

# ðŸš€ PROJECT: AINews Control Center (Supabase Edition)

## 1. PROJECT OVERVIEW
**Goal:** A centralized dashboard to manage automated content publishing workflows for Telegram, VK, OK, and Website.
**Key Functionality:** Managing publishing "Recipes", Prompt Engineering, and Content Monitoring.

## 2. TECH STACK (STRICT)
- **Framework:** Next.js 16 (App Router) + React 19.
- **Styling:** Tailwind CSS 4 + Shadcn UI.
- **Backend:** **Supabase** (Auth + Postgres).
- **Validation:** `zod` (Mandatory).
- **Date Handling:** `date-fns` ONLY.

## 3. ARCHITECTURE (ADMIN MODE)
- **Server-First:** Default to Server Components.
- **BYPASS RLS:** This is an Admin Dashboard.
  - Do NOT write or debug RLS policies.
  - Use `service_role` client if permissions fail or for background jobs.
- **Mutations:** Use Server Actions (`try { ... revalidatePath() ... } catch`).

## 4. DATABASE SCHEMA (Supabase)
**Table: `publish_recipes`**
- `id` (uuid)
- `platform` (text): 'tg', 'vk', 'ok', 'site'
- `is_active` (bool): Master switch.
- `is_main` (bool): Primary source flag.
- `delay_hours` (int): Publishing delay.

## 5. UI/UX STANDARDS
**Platform Identity (Strict Colors):**
- **Telegram:** `text-blue-400`, `bg-blue-50`
- **VK:** `text-blue-600`
- **OK:** `text-orange-500`
- **Website:** `text-emerald-500`

**Behavior:**
- **Inputs:** Always `bg-white text-black` (avoid dark mode conflicts in forms).
- **Save Actions:** Use "Dirty State" (Show Save button only on change).

## 6. SAFETY & ERROR PREVENTION PROTOCOLS (MANDATORY)

### A. The "Impact Analysis" Rule (Fixes Prop Drilling)
*Before modifying any Component Signature or Hook:*
1.  **SEARCH FIRST:** Run a global search for the component name to identify ALL consumers.
2.  **PLAN THE REFACTOR:** Do not change the child without explicitly updating the parent files in the same turn.
3.  **INTERFACE CHECK:** If adding a prop, update the TypeScript Interface first.

### B. The "Large File" Protocol (Fixes Context Blindness)
*When editing files > 300 lines:*
1.  **NO BLIND EDITS:** Never assume imports exist at the top if you haven't read them.
2.  **ANCHORING:** When using `search_and_replace`, use **UNIQUE** code blocks (at least 3-4 lines). Never use generic lines like `return (` or `}` as anchors.

### C. React Stability Protocol (Fixes Infinite Loops)
1.  **Dependency Safety:** NEVER add a function to `useEffect` dependency array unless it is wrapped in `useCallback`.
2.  **Optimistic UI:** When implementing Optimistic Updates, ALWAYS assume the Realtime subscription might fire *before* the server confirmation. Use a distinct `optimisticId`.

### D. FINAL VERIFICATION STEP
*Before outputting "Done":*
1. "Did I change a prop? If yes, did I fix the parent?"
2. "Did I use `service_role` for admin actions?"
3. "Did I close all brackets?"