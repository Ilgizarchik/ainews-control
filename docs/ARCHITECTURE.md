# –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ AI News Control Center

## üèó –û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã

–ü—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—É—é –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ—Å—Ç–Ω—ã–º –ø–æ—Ç–æ–∫–æ–º, –≥–¥–µ –∫–æ–Ω—Ç–µ–Ω—Ç –ø—Ä–æ—Ö–æ–¥–∏—Ç —Ü–∏–∫–ª –æ—Ç –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –¥–æ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –Ω–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º —Å –ø–æ–º–æ—â—å—é –ò–ò.

## üíæ –°—Ö–µ–º–∞ –¥–∞–Ω–Ω—ã—Ö (PostgreSQL)

### News Items (`news_items`)
–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è —Å—É—â–Ω–æ—Å—Ç—å. –°–æ–¥–µ—Ä–∂–∏—Ç:
- –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ (title, source_name, canonical_url).
- –ö–æ–Ω—Ç–µ–Ω—Ç (draft_longread, draft_announce, image_url).
- –°—Ç–∞—Ç—É—Å—ã –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ (`news_status`): `found` -> `needs_review` -> `approved_for_adaptation` -> `generated` -> `published`.
- –õ–æ–≥–∏–∫—É –∞–ø–ø—Ä—É–≤–æ–≤ (approve1_*, approve2_*).

### Publish Jobs (`publish_jobs`)
–ó–∞–¥–∞—á–∏ –Ω–∞ –æ—Ç–ø—Ä–∞–≤–∫—É –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é —Å–æ—Ü—Å–µ—Ç—å.
- –ü—Ä–∏–≤—è–∑–∞–Ω—ã –∫ `news_id`.
- –°–æ–¥–µ—Ä–∂–∞—Ç –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç –∏–º–µ–Ω–Ω–æ –ø–æ–¥ —ç—Ç—É –ø–ª–∞—Ç—Ñ–æ—Ä–º—É (`social_content`).
- –°—Ç–∞—Ç—É—Å—ã: `queued`, `processing`, `published`, `failed`.

### Publish Recipes (`publish_recipes`)
–û–ø—Ä–µ–¥–µ–ª—è—é—Ç –ø—Ä–∞–≤–∏–ª–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏:
- –ù–∞ –∫–∞–∫–∏–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.
- –ó–∞–¥–µ—Ä–∂–∫–∏ (delay_hours) –º–µ–∂–¥—É –ø—É–±–ª–∏–∫–∞—Ü–∏—è–º–∏.
- –ö–∞–∫–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ —è–≤–ª—è–µ—Ç—Å—è –æ—Å–Ω–æ–≤–Ω–æ–π (`is_main`).

### System Prompts (`system_prompts`)
–ü–æ–∑–≤–æ–ª—è—é—Ç –º–µ–Ω—è—Ç—å –ª–æ–≥–∏–∫—É —Ä–∞–±–æ—Ç—ã –ò–ò –±–µ–∑ –≤–Ω–µ—Å–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –≤–æ—Ä–∫—Ñ–ª–æ—É n8n –∏–ª–∏ –∫–æ–¥. –ü—Ä–æ–º–ø—Ç—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –≤ n8n –ø–µ—Ä–µ–¥ –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π.

### Telegram Chats / Social Connections (`telegram_chats`)
–•—Ä–∞–Ω–∏—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π:
- `chat_id` –¥–ª—è Telegram.
- –¢–æ–∫–µ–Ω—ã –∏ ID –≥—Ä—É–ø–ø –¥–ª—è **VK** (`vk_token`, `vk_group_id`) –∏ **OK** (`ok_access_token`, `ok_group_id`).
- –ü–æ–ª–µ `purpose` –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ä–æ–ª—å —á–∞—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≥–¥–µ –ø—Ä–æ–≤–æ–¥–∏—Ç—Å—è –∞–ø–ø—Ä—É–≤, –∞ –≥–¥–µ ‚Äî –ø—É–±–ª–∏–∫–∞—Ü–∏—è).

## ü§ñ –†–æ–ª—å n8n –∏ –ò–ò

–°–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **n8n** –∫–∞–∫ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä —Ç—è–∂–µ–ª—ã—Ö –∑–∞–¥–∞—á:
1.  **Scoring & Filtering**: –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –≤—Ö–æ–¥—è—â–∏—Ö –Ω–æ–≤–æ—Å—Ç–µ–π –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º –∏ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏.
2.  **Multimodal Generation**:
    - –°–æ–∑–¥–∞–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ (Longread).
    - –°–æ–∑–¥–∞–Ω–∏–µ –∫—Ä–∞—Ç–∫–æ–≥–æ –∞–Ω–æ–Ω—Å–∞.
    - –ê–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ–¥ 6+ —Å–æ—Ü—Å–µ—Ç–µ–π (Telegram, VK, OK, X, FB, Threads).
3.  **Image Handling**: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–æ–º–ø—Ç–æ–≤ –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏–ª–∏ –ø–µ—Ä–µ—Å—ã–ª–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö.

### –ê–≥–µ–Ω—Ç—ã (n8n LangChain)
–í –≤–æ—Ä–∫—Ñ–ª–æ—É –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –Ω–æ–¥—ã –¥–ª—è –∫–∞–∂–¥–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã:
- **Telegram Agent**: –†–∞–±–æ—Ç–∞–µ—Ç —Å–æ —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–º–∏ —ç–º–æ–¥–∑–∏-—Ç–µ–≥–∞–º–∏ –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º.
- **VK Agent**: –§–æ—Ä–º–∏—Ä—É–µ—Ç –ø–æ—Å—Ç –≤ —Å—Ç–∏–ª–µ –í–ö —Å —Ö–µ—à—Ç–µ–≥–∞–º–∏.
- **FB/X Agents**: –£—á–∏—Ç—ã–≤–∞—é—Ç –ª–∏–º–∏—Ç—ã —Å–∏–º–≤–æ–ª–æ–≤ –∏ —Å—Ç–∏–ª—å –æ–±—â–µ–Ω–∏—è –ø–ª–æ—â–∞–¥–∫–∏.

## üñ• Frontend –†–µ–∞–ª–∏–∑–∞—Ü–∏—è

### Layout & UI
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `AppShell.tsx` –¥–ª—è –æ—Å–Ω–æ–≤–Ω–æ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–∏.
- –¢–µ–º–∏–∑–∞—Ü–∏—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —á–µ—Ä–µ–∑ `next-themes` (–ø–æ–¥–¥–µ—Ä–∂–∫–∞ Dark Mode).
- –°–ª–æ–∂–Ω—ã–µ —Ä–µ–¥–∞–∫—Ç–æ—Ä—ã (Tiptap) –≤—ã–Ω–µ—Å–µ–Ω—ã –≤ `components/publications/magic-text-editor.tsx`.

### State Management
- –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è Server Actions –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å Supabase.
- –û–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è UI –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è UX (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ —Å–º–µ–Ω–µ —Å—Ç–∞—Ç—É—Å–∞ –Ω–æ–≤–æ—Å—Ç–∏).
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å FullCalendar –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–æ–Ω—Ç–µ–Ω—Ç-–ø–ª–∞–Ω–∞.

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- **Auth**: Supabase Auth —Å middleware –¥–ª—è –∑–∞—â–∏—Ç—ã —Ä–æ—É—Ç–æ–≤.
- **RLS**: –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∫ –ë–î –æ–≥—Ä–∞–Ω–∏—á–µ–Ω—ã –ø–æ–ª–∏—Ç–∏–∫–∞–º–∏ Row Level Security (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ –ø–æ–ª–∏—Ç–∏–∫ –¥–ª—è –Ω–æ–≤—ã—Ö —Ç–∞–±–ª–∏—Ü).

## üöÄ –î–µ–ø–ª–æ–π

- –ü—Ä–æ–µ–∫—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω —Å –ø–æ–º–æ—â—å—é `Dockerfile`.
- –î–ª—è Windows –æ–∫—Ä—É–∂–µ–Ω–∏—è –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω—ã —Å–∫—Ä–∏–ø—Ç—ã `deploy.bat` –∏ `release.bat`.
- n8n –≤–æ—Ä–∫—Ñ–ª–æ—É —Ç—Ä–µ–±—É—é—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —É—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (Postgres, OpenRouter) –ø–æ—Å–ª–µ –∏–º–ø–æ—Ä—Ç–∞.
